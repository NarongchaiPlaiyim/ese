<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <!-- Start Header Logo -->
    <ui:include src="include/header.xhtml"/>
    <!-- End Header Logo -->
    <h:head>
        <title>Barcode Register</title>
        <h:outputStylesheet name="css/style.css"/>
        <!--<h:outputStylesheet name="css/style.green.css"/>-->
        <h:outputStylesheet name="css/menubar.css"/>
        <h:outputScript library="js" name="custom.js" />
    </h:head>
    <h:body>
        <p:panel id="pnl_maincontainer">
            <div id="main_container" >
                <h:form id="setupForm">
                    <div class="body_lpane" style="width: 200px">
                        <a class="step_border_selected" href="barcodeRegister.xhtml">1. Barcode Register</a>
                        <a class="step_border_select" href="palletManagement.xhtml">2. Pallet Tag Printing</a>
                        <a class="step_border_select" href="setup.xhtml">7. Setup</a>
                    </div>
                    <div class="body_rpane" style="width: 80%">
                        <label class="subject">1. Barcode Register</label>
                        <table border="0" class="content_table_form">
                            <tr >
                                <td style="min-width: 100px; width: 100px; max-width: 100px;" class="left" />
                                <td style="min-width: 200px; width: 200px; max-width: 200px;" class="left" />
                                <td style="min-width: 100px; width: 100px; max-width: 100px;" class="center" />
                                <td style="min-width: 100px; width: 100px; max-width: 100px;" class="left" />
                                <td style="min-width: 200px; width: 200px; max-width: 200px;" class="left" />
                                <td/>
                            </tr>


                            <tr>
                                <td colspan="5" class="right">
                                    <h:outputText id="modeBarcode" value="#{barcodeRegisterBean.modeBarcode}"/>

                                    <p:commandButton id="btnPrint"
                                                     value="Print"
                                                     process="@form"
                                                     update=":setupForm"
                                                     disabled="#{barcodeRegisterBean.flagBtnPrint}"
                                                     action="#{barcodeRegisterBean.onPrint}"
                                                     ajax="false"/>

                                    <p:commandButton value="New" action="#{barcodeRegisterBean.onClickButtonNew()}" update="@form, :setupForm:barcodeRegisterTable" />

                                    <p:commandButton value="Save"
                                                     id="btnSave"
                                                     disabled="#{barcodeRegisterBean.flagBtnSave}"
                                                     styleClass="medium" style="width: 80px"
                                                     icon="ui-icon-check"
                                                     onstart="PF('bui').show()"
                                                     action="#{barcodeRegisterBean.onSave()}"
                                                     oncomplete="PF('bui').hide()"
                                                     update="@this,
                                                     :setupForm:btnDelete,
                                                     :setupForm:barcodeRegisterTable,
                                                     :msgBoxSystemMessagePanel,
                                                     "
                                            />

                                    <p:commandButton value="Edit"
                                                     id="btnEdit"
                                                     disabled="#{barcodeRegisterBean.flagBtnEdit}"
                                                     styleClass="medium" style="width: 80px"
                                                     icon="ui-icon-wrench"
                                                     onstart="PF('bui').show()"
                                                     action="#{barcodeRegisterBean.onEdit()}"
                                                     oncomplete="PF('bui').hide()"
                                                     update="@this,
                                                     :setupForm:btnDelete,
                                                     :setupForm:barcodeRegisterTable,
                                                     :msgBoxSystemMessagePanel,
                                                     "
                                            />
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <h:outputLabel value="Item*"/>
                                </td>
                                <td>
                                    <p:outputLabel
                                            id="itemLabel"
                                            style="min-width: 200px; width: 200px; max-width: 200px;"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.msItemModel.DSGThaiItemDescription}"/>
                                </td>
                                <td>
                                    <p:commandButton value="Select" styleClass="medium" style="width: 80px"
                                                     action="#{barcodeRegisterBean.onInitSearch()}"
                                                     update=":frmFindProduct"
                                                     oncomplete="PF('findProductDlg').show()"/>
                                </td>
                                <td>
                                    <h:outputLabel value="Qty*"/>
                                </td>
                                <td colspan="2">
                                    <p:inputText style="min-width: 80px; width: 80px; max-width: 80px;"
                                                 id="otyLabel"
                                                 styleClass="right"
                                                 maxlength="8"
                                                 onkeydown="return onKeyDownNumber(event);"
                                                 onkeypress="return onKeyPressNumber(event);"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.qty}">
                                        <p:ajax event="keyup" listener="#{barcodeRegisterBean.calculator()}"
                                                update=":setupForm:labelFinishBarcode" />
                                        <p:ajax event="blur" listener="#{barcodeRegisterBean.calculator()}"
                                                update=":setupForm:labelFinishBarcode" />
                                    </p:inputText>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <h:outputLabel value="Document No"/>
                                </td>
                                <td colspan="2">
                                    <h:outputLabel style="min-width: 200px; width: 200px; max-width: 200px;"
                                                   id = "documentNoLabel"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.documentNo}"/>
                                </td>
                                <td>
                                    <h:outputLabel value="Start Barcode*"/>
                                </td>
                                <td >
                                    <p:inputMask id="startLabel"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.startBarcode}"
                                                 onkeydown="return onKeyDownNumber(event);"
                                                 onkeypress="return onKeyPressNumber(event);"
                                                 mask="T-999-99-9999">
                                        <p:ajax event="keyup"
                                                listener="#{barcodeRegisterBean.calculator()}"
                                                update=":setupForm:labelFinishBarcode" />
                                        <p:ajax event="blur"
                                                listener="#{barcodeRegisterBean.calculator()}"
                                                update=":setupForm:labelFinishBarcode" />
                                    </p:inputMask>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <h:outputLabel value="Document Date*"/>
                                </td>
                                <td colspan="2">
                                    <p:calendar value="#{barcodeRegisterBean.barcodeRegisterView.documentDate}"
                                                id="docDateLabel"
                                                pattern="dd/MM/yyyy"
                                            showOn="button"      >
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </p:calendar>
                                </td>
                                <td>
                                    <h:outputLabel value="Finish Barcode*"/>
                                </td>
                                <td>
                                    <p:inputMask id="labelFinishBarcode"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.finishBarcode}"
                                                 readonly="true"
                                                 mask="T-999-99-9999"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h:outputLabel value="Batch No*"/>
                                </td>
                                <td colspan="2">
                                    <p:inputText style="min-width: 200px; width: 200px; max-width: 200px;"
                                                 id="batchNoLabel"
                                                 value="#{barcodeRegisterBean.barcodeRegisterView.batchNo}"/>
                                </td>
                                <td>
                                    <h:outputLabel value="Remark"/>
                                </td>
                                <td colspan="3">
                                    <p:inputTextarea style="width: 200px; max-width: 200px;min-width: 200px; height: 50px;"
                                                     id="remarkLabel"
                                                     value="#{barcodeRegisterBean.barcodeRegisterView.remark}"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="right" colspan="5">
                                    <p:commandButton value="delete"
                                                     id="btnDelete"
                                                     disabled="#{barcodeRegisterBean.flagBtnDelete}"
                                                     styleClass="medium" style="width: 80px"
                                                     icon="ui-icon-trash"
                                                     onstart="PF('bui').show()"
                                                     action="#{barcodeRegisterBean.onDelete()}"
                                                     oncomplete="PF('bui').hide()"
                                                     update=":setupForm:barcodeRegisterTable,
                                                     :setupForm:btnDelete,
                                                     :msgBoxSystemMessagePanel,
                                                     :setupForm:barcodeRegisterTable,
                                                     "
                                            />
                                </td>
                            </tr>
                        </table>

                        <table border="0" class="content_table_form">
                            <tr>
                                <td colspan="6">
                                    <p:dataTable id="barcodeRegisterTable"
                                                 rows="10"
                                                 paginator="true"
                                                 var="barcodeModel"
                                                 value="#{barcodeRegisterBean.barcodeRegisterModelList}"
                                                 selectionMode="single"
                                                 selection="#{barcodeRegisterBean.barcodeRegisterModel}"
                                                 rowKey="#{barcodeModel.id}"
                                                 rowIndexVar="rowIndex">
                                        <p:ajax event="rowSelect" update=":setupForm" listener="#{barcodeRegisterBean.onClickTable()}"/>
                                        <p:column headerText="No" style="min-width: 5px; width: 5px; max-width: 5px;">
                                            <p:outputLabel value="#{rowIndex+1}" styleClass="center" />
                                        </p:column>
                                        <p:column headerText="Item Code" style="min-width: 60px; width: 60px; max-width: 60px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.msItemModel.itemId}"/>
                                        </p:column>
                                        <p:column headerText="Item Description" style="min-width: 250px; width: 250px; max-width: 250px;" styleClass="left">
                                            <p:outputLabel value="#{barcodeModel.msItemModel.DSGThaiItemDescription}"/>
                                        </p:column>
                                        <p:column headerText="Document No." style="min-width: 110px; width: 110px; max-width: 110px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.docNo}"/>
                                        </p:column>
                                        <p:column headerText="Document Date" style="min-width: 70px; width: 70px; max-width: 70px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.productionDate}">
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column headerText="Bacth No" style="min-width: 50px; width: 50px; max-width: 50px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.batchNo}"/>
                                        </p:column>
                                        <p:column headerText="Qty" style="min-width: 50px; width: 50px; max-width: 50px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.qty}"/>
                                        </p:column>
                                        <p:column headerText="Start Barcode" style="min-width: 80px; width: 80px; max-width: 80px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.startBarcodeText}"/>
                                        </p:column>
                                        <p:column headerText="Finish Barcode" style="min-width: 80px; width: 80px; max-width: 80px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.finishBarcodeText}"/>
                                        </p:column>
                                        <p:column headerText="Remark" style="min-width: 110px; width: 110px; max-width: 110px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.remark}"/>
                                        </p:column>
                                        <p:column headerText="Status" style="min-width: 30px; width: 30px; max-width: 30px;" styleClass="center">
                                            <p:outputLabel value="#{barcodeModel.status}"/>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                        </table>
                    </div>
                </h:form>
                <p:dialog id="findProductDialog" widgetVar="findProductDlg" header="Find Product"
                          onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
                          modal="true" width="650" height="400">
                    <ui:include src="../site/dialog/findProductDialog.xhtml"/>
                </p:dialog>
            </div>
        </p:panel>
        <p:blockUI block="pnl_maincontainer" widgetVar="bui">
            <h:panelGrid columns="2">
                <h:outputText value="Please wait..." />
                <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
            </h:panelGrid>
        </p:blockUI>
        <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
            <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" width="350px" closable="false"
                             header="#{barcodeRegisterBean.messageHeader}" message="#{barcodeRegisterBean.message}" >
                <table border="0" style="width: 100%">
                    <tr>
                        <td colspan="100%" class="right">
                            <p:commandButton value="OK"
                                             process="@this"
                                             update="setupForm"
                                             oncomplete="PF('msgBoxSystemMessageDlg').hide()"/>
                        </td>
                    </tr>
                </table>
            </p:confirmDialog>
        </p:panel>
    </h:body>
</f:view>
</html>